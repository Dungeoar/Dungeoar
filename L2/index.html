<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width" />
  <title>Dungeoar</title>
  <link href="l2Style.css" rel="stylesheet" type="text/css">
  <script>
    var inventoryArray = JSON.parse(sessionStorage.getItem("inventoryArray"));
    let x = sessionStorage.getItem('xpos');
    let y = sessionStorage.getItem('ypos') - 30;
    var isMonsterDead = false;
    function setUp() {
      document.getElementById("img").style.left = parseFloat(x);
      document.getElementById("img").style.top = parseFloat(y);
      if (sessionStorage.getItem("3tv8fhwin") === "true") {
        document.getElementById("nme1").remove();
        document.getElementById("imgBeta").src = "Key-trimmy.png"
        isMonsterDead = true;
      }
    }
    function readBg() {
      if (inventoryArray[0] != null) {
        document.getElementById("invSlot1").style.backgroundImage = "url(../InventoryAssets/" + inventoryArray[0] + ")";
      }
      if (inventoryArray[1] != null) {
        document.getElementById("invSlot2").style.backgroundImage = "url(../InventoryAssets/" + inventoryArray[1] + ")";
      }
      if (inventoryArray[2] != null) {
        document.getElementById("invSlot3").style.backgroundImage = "url(../InventoryAssets/" + inventoryArray[2] + ")";
      }
      if (inventoryArray[3] != null) {
        document.getElementById("invSlot4").style.backgroundImage = "url(../InventoryAssets/" + inventoryArray[3] + ")";
      }
      if (inventoryArray[4] != null) {
        document.getElementById("invSlot5").style.backgroundImage = "url(../InventoryAssets/" + inventoryArray[4] + ")";
      }
      if (inventoryArray[5] != null) {
        document.getElementById("invSlot6").style.backgroundImage = "url(../InventoryAssets/" + inventoryArray[5] + ")";
      }
      if (inventoryArray[6] != null) {
        document.getElementById("invSlot7").style.backgroundImage = "url(../InventoryAssets/" + inventoryArray[6] + ")";
      }
      if (inventoryArray[7] != null) {
        document.getElementById("invSlot8").style.backgroundImage = "url(../InventoryAssets/" + inventoryArray[7] + ")";
      }
      if (inventoryArray[8] != null) {
        document.getElementById("invSlot9").style.backgroundImage = "url(../InventoryAssets/" + inventoryArray[8] + ")";
      }
      if (inventoryArray[9] != null) {
        document.getElementById("invSlot10").style.backgroundImage = "url(../InventoryAssets/" + inventoryArray[9] + ")";
      }
      if (inventoryArray[10] != null) {
        document.getElementById("invWeapon").style.backgroundImage = "url(../InventoryAssets/" + inventoryArray[10] + ")";
      }
      if (inventoryArray[11] != null) {
        document.getElementById("invArmor").style.backgroundImage = "url(../InventoryAssets/" + inventoryArray[11] + ")";
      }
      if (inventoryArray[12] != null) {
        document.getElementById("invNoIdea").style.backgroundImage = "url(../InventoryAssets/" + inventoryArray[12] + ")";
      }
      if (inventoryArray[13] != null) {
        document.getElementById("invNoIdea").style.backgroundImage = "url(../InventoryAssets/" + inventoryArray[13] + ")";
      }
      if (inventoryArray[14] != null) {
        document.getElementById("invNoIdea").style.backgroundImage = "url(../InventoryAssets/" + inventoryArray[14] + ")";
      }
    }
    function megaSetup() {
      setUp();
      readBg();
    }
  </script>
</head>

<body class="l2" onload="megaSetup();">
  <div id="invContainer"
    style="background-color: rgba(30, 30, 30, 0.5);width:365px;height:250px;border-radius:0.5em;position:relative;top:100px;right:350px;">
    <div class="invSlot" id="slot1" class="invSlot"
      style="background-color: rgba(20, 20, 20, 0.75);width:50px;height:50px;border-radius:0.5em;position:relative;top:25px;left:25px;">
    </div>
    <div id="slot2" class="invSlot"
      style="background-color: rgba(20, 20, 20, 0.75);width:50px;height:50px;border-radius:0.5em;position:relative;bottom:25px;left:85px;">
    </div>
    <div id="slot3" class="invSlot"
      style="background-color: rgba(20, 20, 20, 0.75);width:50px;height:50px;border-radius:0.5em;position:relative;bottom:75px;left:145px;">
    </div>
    <div id="slot4" class="invSlot"
      style="background-color: rgba(20, 20, 20, 0.75);width:50px;height:50px;border-radius:0.5em;position:relative;left:205px;bottom:125px;">
    </div>
    <div id="slot5" class="invSlot"
      style="background-color: rgba(20, 20, 20, 0.75);width:50px;height:50px;border-radius:0.5em;position:relative;left:265px;bottom:175px;">
    </div>
    <div id="slot6" class="invSlot"
      style="background-color: rgba(20, 20, 20, 0.75);width:50px;height:50px;border-radius:0.5em;position:relative;bottom:165px;left:25px">
    </div>
    <div id="slot7" class="invSlot"
      style="background-color: rgba(20, 20, 20, 0.75);width:50px;height:50px;border-radius:0.5em;position:relative;bottom:215px;left:85px;">
    </div>
    <div id="slot8" class="invSlot"
      style="background-color: rgba(20, 20, 20, 0.75);width:50px;height:50px;border-radius:0.5em;position:relative;bottom:265px;left:145px;">
    </div>
    <div id="slot9" class="invSlot"
      style="background-color: rgba(20, 20, 20, 0.75);width:50px;height:50px;border-radius:0.5em;position:relative;bottom:315px;left:205px;">
    </div>
    <div id="slot10" class="invSlot"
      style="background-color: rgba(20, 20, 20, 0.75);width:50px;height:50px;border-radius:0.5em;position:relative;bottom:365px;left:265px;">
    </div>
    <div id="invBar" class="invSlot"
      style="background-color: rgba(20, 20, 20, 0.75);width:290px;height:20px;border-radius:0.5em;position:relative;bottom:355px;left:25px;">
    </div>
    <div id="invWeapon" class="invSlot"
      style="background-color: rgba(20, 20, 20, 0.75);width:50px;height:50px;border-radius:0.5em;position:relative;bottom:340px;left:25px;">
    </div>
    <div id="invArmor" class="invSlot"
      style="background-color: rgba(20, 20, 20, 0.75);width:50px;height:50px;border-radius:0.5em;position:relative;bottom:390px;left:85px;">
    </div>
    <div id="invNoIdea" class="invSlot"
      style="background-color: rgba(20, 20, 20, 0.75);width:50px;height:50px;border-radius:0.5em;position:relative;bottom:440px;left:145px;">
    </div>
    <div id="invNoIdea" class="invSlot"
      style="background-color: rgba(20, 20, 20, 0.75);width:50px;height:50px;border-radius:0.5em;position:relative;bottom:490px;left:205px;">
    </div>
    <div id="invNoIdea" class="invSlot"
      style="background-color: rgba(20, 20, 20, 0.75);width:50px;height:50px;border-radius:0.5em;position:relative;bottom:540px;left:265px;">
    </div>
  </div>
  <div id="nme1"><img src="3tv8fh-nme.png" id="nme" /></div>
  <div><img id="imgBeta" /></div>
  <div id="door"><img id="doorimg" src="door.png"></div>
  <div id="img"><img src="char (4) (2).png" id="imgEl" /></div>
  <script type="text/javascript">
    (function () {
      function DOMelementOverlapCheck(div1, div2) {
        const domRect1 = div1.getBoundingClientRect();
        const domRect2 = div2.getBoundingClientRect();
        return !(
          domRect1.top > domRect2.bottom ||
          domRect1.right < domRect2.left ||
          domRect1.bottom < domRect2.top ||
          domRect1.left > domRect2.right
        );
      }
      const nmeDiv = document.getElementById("nme1");
      var xAxis = parseFloat(x);
      var yAxis = parseFloat(y);
      const moveSpeed = 10;
      var invOpen = false;
      var slotfound = false;
      const div = document.getElementById('img');
      document.onkeydown = function (event) {
        switch (event.key) {
          case 'Control':
            if (invOpen === true) {
              invContainer.animate([
                {
                  right: '10px'
                },

                {
                  right: '350px'
                }
              ], 500)
              invContainer.style.right = '350px'
              invOpen = false;
            }
            else if (invOpen === false) {
              invContainer.animate([
                {
                  right: '350px'
                },

                {
                  right: '10px'
                }
              ], 500)
              invContainer.style.right = '10px'
              invOpen = true;
            }
            break;
          case 'ArrowLeft':
            xAxis -= moveSpeed;
            div.style.left = xAxis + 'px';
            if (DOMelementOverlapCheck(nmeDiv, div) === true && isMonsterDead === false) {
              self.location = "/Battle/?id=3tv8fh";
              sessionStorage.setItem("charHp", "3");
              sessionStorage.setItem("nmeHp", "3");
            }
            else if (DOMelementOverlapCheck(document.getElementById("imgBeta"), div)) {
              document.getElementById("imgBeta").style.visibility = 'hidden';
              inventoryArray[0] = "../InventoryAssets/Key-trimmy.png";
              document.getElementById("slot1").style.backgroundImage = "url(" + inventoryArray[0] + ")";
            }
            break;
          case 'ArrowUp':
            yAxis -= moveSpeed;
            div.style.top = yAxis + 'px';
            if (DOMelementOverlapCheck(nmeDiv, div) === true && isMonsterDead === false) {
              self.location = "/Battle/?id=3tv8fh";
              sessionStorage.setItem("charHp", "3");
              sessionStorage.setItem("nmeHp", "3");
            }
            else if (DOMelementOverlapCheck(document.getElementById("imgBeta"), div)) {
              document.getElementById("imgBeta").style.visibility = 'hidden';
              inventoryArray[0] = "../InventoryAssets/Key-trimmy.png";
              document.getElementById("slot1").style.backgroundImage = "url(" + inventoryArray[0] + ")";
            }
            break;
          case 'ArrowRight':
            xAxis += moveSpeed;
            div.style.left = xAxis + 'px';
            if (DOMelementOverlapCheck(nmeDiv, div) === true && isMonsterDead === false) {
              self.location = "/Battle/?id=3tv8fh";
              sessionStorage.setItem("charHp", "3");
              sessionStorage.setItem("nmeHp", "3");
            }
            else if (DOMelementOverlapCheck(document.getElementById("imgBeta"), div)) {
              document.getElementById("imgBeta").style.visibility = 'hidden';
              inventoryArray[0] = "../InventoryAssets/Key-trimmy.png";
              document.getElementById("slot1").style.backgroundImage = "url(" + inventoryArray[0] + ")";
            }
            break;
          case 'ArrowDown':
            yAxis += moveSpeed;
            div.style.top = yAxis + 'px';
            if (DOMelementOverlapCheck(nmeDiv, div) === true && isMonsterDead === false) {
              self.location = "/Battle/?id=3tv8fh";
              sessionStorage.setItem("charHp", "3");
              sessionStorage.setItem("nmeHp", "3");
            }
            else if (DOMelementOverlapCheck(document.getElementById("imgBeta"), div)) {
              document.getElementById("imgBeta").style.visibility = 'hidden';
              inventoryArray[0] = "../InventoryAssets/Key-trimmy.png";
              document.getElementById("slot1").style.backgroundImage = "url(" + inventoryArray[0] + ")";
            }
            break;
        }
      };
    })();
  </script>
  <div id="githubLogoWrapper"><a><img></a></div>
</body>
</html>