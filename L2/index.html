<html>
    <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width" />
      <title>RPG Webgame Testing</title>
      <link href="l2Style.css" rel="stylesheet" type="text/css">

      <script>
        let x = localStorage.getItem('xpos');
        let y = localStorage.getItem('ypos');
        function setUp() {
          document.getElementById("img").style.left = parseFloat(x);
          document.getElementById("img").style.top = parseFloat(y);
          if(localStorage.getItem("3tv8fhwin") === "true")
          {
            document.getElementById("nme1").remove();
            localStorage.removeItem('3tv8fhwin');
          }
        }
      </script>
    </head>
    <body class = "l2" onload="setUp();">
        <div id="img"><img src="char (4) (2).png" id="imgEl"/></div>
        <div id = "nme1"><img src="3tv8fh-nme.png" id="nme"/></div>
        <script type="text/javascript">
            (function() {
              function DOMelementOverlapCheck(div1, div2) {
                const domRect1 = div1.getBoundingClientRect();
                const domRect2 = div2.getBoundingClientRect();
                return !(
                  domRect1.top > domRect2.bottom ||
                  domRect1.right < domRect2.left ||
                  domRect1.bottom < domRect2.top ||
                  domRect1.left > domRect2.right
                );
              }
              const nmeDiv = document.getElementById("nme1");
              var xAxis = parseFloat(x);
              var yAxis = parseFloat(y);
              const moveSpeed = 10;
              const div = document.getElementById('img');
              document.onkeydown = function(event) {
                switch (event.keyCode) {
                  case 37:
                    xAxis -= moveSpeed;
                    div.style.left = xAxis + 'px';
                    if(DOMelementOverlapCheck(nmeDiv, div) === true)
                    {
                      self.location="https://minikielbym.github.io/WebGame/Battle/?id=3tv8fh";
                      localStorage.setItem("charHp", "3");
                      localStorage.setItem("nmeHp", "3");
                    }
                    break;
                  case 38:
                    yAxis -= moveSpeed;
                    div.style.top = yAxis + 'px';
                    if(DOMelementOverlapCheck(nmeDiv, div) === true)
                    {
                      self.location="https://minikielbym.github.io/WebGame/Battle/?id=3tv8fh";
                      localStorage.setItem("charHp", "3");
                      localStorage.setItem("nmeHp", "3");
                    }
                    break;
                  case 39:
                    xAxis += moveSpeed;
                    div.style.left = xAxis + 'px';
                    if(DOMelementOverlapCheck(nmeDiv, div) === true)
                    {
                      self.location="https://minikielbym.github.io/WebGame/Battle/?id=3tv8fh";
                      localStorage.setItem("charHp", "3");
                      localStorage.setItem("nmeHp", "3");
                    }
                    break;
                  case 40: 
                    yAxis += moveSpeed;
                    div.style.top = yAxis + 'px';
                    if(DOMelementOverlapCheck(nmeDiv, div) === true)
                    {
                      self.location="https://minikielbym.github.io/WebGame/Battle/?id=3tv8fh";
                      localStorage.setItem("charHp", "3");
                      localStorage.setItem("nmeHp", "3");
                    }
                   break;
                }
              };
            })();
          </script>
    </body>
</html>
